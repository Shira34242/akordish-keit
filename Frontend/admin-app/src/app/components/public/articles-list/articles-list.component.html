<div class="articles-list-page" dir="rtl">

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner"></div>
    <p>טוען כתבות...</p>
  </div>

  <!-- Main Content -->
  <div *ngIf="!isLoading" class="content-wrapper">

    <!-- Advanced Search Section -->
    <section class="advanced-search">
      <h2 class="search-title">סינון מתקדם</h2>

      <div class="search-filters">
        <!-- Search Input -->
        <div class="filter-group">
          <label for="search">חיפוש חופשי</label>
          <input
            type="text"
            id="search"
            [(ngModel)]="searchTerm"
            placeholder="חפש לפי כותרת או תוכן..."
            class="filter-input"
          >
        </div>

        <!-- Category Filter -->
        <div class="filter-group">
          <label for="category">קטגוריה</label>
          <select
            id="category"
            [(ngModel)]="categoryId"
            class="filter-select"
          >
            <option [value]="undefined">כל הקטגוריות</option>
            <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name }}</option>
          </select>
        </div>

        <!-- Content Type Filter -->
        <div class="filter-group">
          <label for="contentType">סוג תוכן</label>
          <select
            id="contentType"
            [(ngModel)]="contentType"
            class="filter-select"
          >
            <option [value]="undefined">כל הסוגים</option>
            <option *ngFor="let type of contentTypes" [value]="type.id">{{ type.name }}</option>
          </select>
        </div>

        <!-- Action Buttons -->
        <div class="filter-actions">
          <button class="filter-btn primary" (click)="applyFilters()">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            חפש
          </button>
          <button class="filter-btn secondary" (click)="resetFilters()">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
              <path d="M21 3v5h-5"></path>
              <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
              <path d="M3 21v-5h5"></path>
            </svg>
            אפס
          </button>
        </div>
      </div>

      <!-- Results Count -->
      <div class="results-summary">
        <p>נמצאו <strong>{{ totalCount }}</strong> כתבות</p>
      </div>
    </section>

    <!-- Articles Grid -->
    <section class="articles-grid" *ngIf="articles.length > 0">
      <div
        *ngFor="let article of articles"
        class="article-card"
        (click)="navigateToArticle(article)"
      >
        <div class="article-image-wrapper">
          <img [src]="article.featuredImageUrl" [alt]="article.title" class="article-image" loading="lazy">
        </div>
        <div class="article-content">
          <div class="article-categories">
            <span *ngFor="let category of article.categoryNames" class="category-badge">
              {{ category }}
            </span>
          </div>
          <h2 class="article-title">{{ article.title }}</h2>
          <p class="article-subtitle" *ngIf="article.subtitle">{{ article.subtitle }}</p>
          <div class="article-meta">
            <span class="article-date">{{ article.publishDate | date: 'dd/MM/yyyy' }}</span>
            <span class="article-author" *ngIf="article.authorName">{{ article.authorName }}</span>
          </div>
        </div>
      </div>
    </section>

    <!-- No Results -->
    <div *ngIf="articles.length === 0" class="no-results">
      <p>לא נמצאו כתבות</p>
    </div>

    <!-- Pagination -->
    <section class="pagination" *ngIf="totalPages > 1">
      <button
        class="pagination-btn"
        [disabled]="currentPage === 1"
        (click)="goToPage(currentPage - 1)"
      >
        הקודם
      </button>

      <button
        *ngFor="let page of pageNumbers"
        class="pagination-btn page-number"
        [class.active]="page === currentPage"
        (click)="goToPage(page)"
      >
        {{ page }}
      </button>

      <button
        class="pagination-btn"
        [disabled]="currentPage === totalPages"
        (click)="goToPage(currentPage + 1)"
      >
        הבא
      </button>
    </section>

  </div>
</div>
